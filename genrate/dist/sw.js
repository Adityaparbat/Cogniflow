const CACHE_NAME="genrate-v1",STATIC_CACHE="genrate-static-v1",DYNAMIC_CACHE="genrate-dynamic-v1",STATIC_FILES=["/","/index.html","/manifest.json","/books/class1_english[1]/aemr101.pdf","/books/class1_english[1]/aemr102.pdf","/books/class1_english[1]/aemr103.pdf","/books/class1_english[1]/aemr104.pdf","/books/class1_english[1]/aemr105.pdf","/books/class1_english[1]/aemr106.pdf","/books/class1_english[1]/aemr107.pdf","/books/class1_english[1]/aemr108.pdf","/books/class1_english[1]/aemr109.pdf","/books/class1_hindi[1]/ahsr101.pdf","/books/class1_hindi[1]/ahsr102.pdf","/books/class1_hindi[1]/ahsr103.pdf","/books/class1_hindi[1]/ahsr104.pdf","/books/class1_hindi[1]/ahsr105.pdf","/books/class1_hindi[1]/ahsr106.pdf","/books/class1_hindi[1]/ahsr107.pdf","/books/class1_hindi[1]/ahsr108.pdf","/books/class1_hindi[1]/ahsr109.pdf","/books/class1_hindi[1]/ahsr110.pdf","/books/class1_hindi[1]/ahsr111.pdf","/books/class1_hindi[1]/ahsr112.pdf","/books/class1_hindi[1]/ahsr113.pdf","/books/class1_hindi[1]/ahsr114.pdf","/books/class1_hindi[1]/ahsr115.pdf","/books/class1_hindi[1]/ahsr116.pdf","/books/class1_hindi[1]/ahsr117.pdf","/books/class1_hindi[1]/ahsr118.pdf","/books/class1_hindi[1]/ahsr119.pdf","/books/class1_hindi[1]/ahsr1ps.pdf","/books/class1_math[1]/aejm101.pdf","/books/class1_math[1]/aejm102.pdf","/books/class1_math[1]/aejm103.pdf","/books/class1_math[1]/aejm104.pdf","/books/class1_math[1]/aejm105.pdf","/books/class1_math[1]/aejm106.pdf","/books/class1_math[1]/aejm107.pdf","/books/class1_math[1]/aejm108.pdf","/books/class1_math[1]/aejm109.pdf","/books/class1_math[1]/aejm110.pdf","/books/class1_math[1]/aejm111.pdf","/books/class1_math[1]/aejm112.pdf","/books/class1_math[1]/aejm113.pdf","/books/class1_math[1]/aejm1ps.pdf"];async function doBackgroundSync(){try{console.log("Processing background sync...")}catch(s){console.error("Background sync failed:",s)}}self.addEventListener("install",s=>{console.log("Service Worker installing..."),s.waitUntil(caches.open(STATIC_CACHE).then(s=>(console.log("Caching static files"),s.addAll(STATIC_FILES))).catch(s=>{console.log("Cache installation failed:",s)})),self.skipWaiting()}),self.addEventListener("activate",s=>{console.log("Service Worker activating..."),s.waitUntil(caches.keys().then(s=>Promise.all(s.map(s=>{if(s!==STATIC_CACHE&&s!==DYNAMIC_CACHE)return console.log("Deleting old cache:",s),caches.delete(s)})))),self.clients.claim()}),self.addEventListener("fetch",s=>{const{request:a}=s,e=new URL(a.url);a.url.includes(".pdf")?s.respondWith(caches.match(a).then(s=>s?(console.log("Serving PDF from cache:",a.url),s):fetch(a).then(s=>{if(200===s.status){const e=s.clone();caches.open(DYNAMIC_CACHE).then(s=>{s.put(a,e)})}return s})).catch(()=>new Response("PDF not available offline",{status:404,statusText:"Not Found"}))):e.pathname.startsWith("/api/")?s.respondWith(fetch(a).then(s=>{if(200===s.status){const e=s.clone();caches.open(DYNAMIC_CACHE).then(s=>{s.put(a,e)})}return s}).catch(()=>caches.match(a).then(s=>s||new Response("API not available offline",{status:503,statusText:"Service Unavailable"})))):"GET"===a.method&&s.respondWith(caches.match(a).then(s=>s||fetch(a).then(s=>{if(200===s.status){const e=s.clone();caches.open(DYNAMIC_CACHE).then(s=>{s.put(a,e)})}return s})).catch(()=>{if("document"===a.destination)return caches.match("/")}))}),self.addEventListener("sync",s=>{"background-sync"===s.tag&&(console.log("Background sync triggered"),s.waitUntil(doBackgroundSync()))}),self.addEventListener("push",s=>{const a={body:s.data?s.data.text():"New content available!",icon:"/icon-192x192.png",badge:"/icon-192x192.png",vibrate:[100,50,100],data:{dateOfArrival:Date.now(),primaryKey:1},actions:[{action:"explore",title:"View",icon:"/icon-192x192.png"},{action:"close",title:"Close",icon:"/icon-192x192.png"}]};s.waitUntil(self.registration.showNotification("Genrate App",a))}),self.addEventListener("notificationclick",s=>{s.notification.close(),"explore"===s.action&&s.waitUntil(clients.openWindow("/"))});